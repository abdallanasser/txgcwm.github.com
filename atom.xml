<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[残剑]]></title>
  <link href="http://txgcwm.github.io/atom.xml" rel="self"/>
  <link href="http://txgcwm.github.io/"/>
  <updated>2014-03-30T09:57:42+08:00</updated>
  <id>http://txgcwm.github.io/</id>
  <author>
    <name><![CDATA[残剑]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[cp命令]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/30/cpming-ling/"/>
    <updated>2014-03-30T09:45:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/30/cpming-ling</id>
    <content type="html"><![CDATA[<p>该命令的功能是将给出的文件或目录拷贝到另一文件或目录中，同MSDOS下的copy命令一样，功能十分强大。</p>

<p>语法:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cp [选项] 源文件或目录 目标文件或目录</span></code></pre></td></tr></table></div></figure>


<p>说明:该命令把指定的源文件复制到目标文件或把多个源文件复制到目标目录中。</p>

<p>该命令的各选项含义如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-a      该选项通常在拷贝目录时使用。它保留链接、文件属性，并递归地拷贝目录，其作用等于dpR选项的组合。
</span><span class='line'>-d      拷贝时保留链接。
</span><span class='line'>-f      删除已经存在的目标文件而不提示。
</span><span class='line'>-i      和f选项相反，在覆盖目标文件之前将给出提示要求用户确认。回答y时目标文件将被覆盖，是交互式拷贝。
</span><span class='line'>-p      此时cp除复制源文件的内容外，还将把其修改时间和访问权限也复制到新文件中。
</span><span class='line'>-r      若给出的源文件是一目录文件，此时cp将递归复制该目录下所有的子目录和文件。此时目标文件必须是一个目录名。
</span><span class='line'>-l      不作拷贝，只是链接文件。</span></code></pre></td></tr></table></div></figure>


<p>需要说明的是，为防止用户在不经意的情况下用cp命令破坏另一个文件，如用户指定的目标文件名已存在，用cp命令拷贝文件后，这个文件就会被新源文件覆盖，因此，建议用户在使用cp命令拷贝文件时，最好使用i选项。</p>

<!--more-->


<p>例子:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cp -i file1 file2    将文档file1复制成file2，-i为提示确认。
</span><span class='line'>cp file1 dir1        将文档file1复制到目录dir1下，文件名仍为file1。
</span><span class='line'>cp /tmp/file1 .      将目录/tmp下的文档file1复制到当前目录下，文档名仍为file1。
</span><span class='line'>cp /tmp/file1 file2  将目录/tmp下的文档file1复制到当前目录下，文档名为file2
</span><span class='line'>cp -r dir1 dir2      (recursive copy)复制整个目录。若目录dir2存在，则将目录dir1及其所有文档和子目录复制到目录dir2下，新目录名称为dir1。若目录dir2不存在，则将dir1及其所有文档和子目录复制为目录 dir2。</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu下安装c-ares库]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/26/ubuntuxia-an-zhuang-c-aresku/"/>
    <updated>2014-03-26T22:59:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/26/ubuntuxia-an-zhuang-c-aresku</id>
    <content type="html"><![CDATA[<p>安装c-ares库的三种方法：</p>

<h1>源码安装</h1>

<p>到<a href="http://c-ares.haxx.se/">这里</a>下载源码，然后执行以下指令编译和安装。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd c-ares-1.10.0
</span><span class='line'>$ ./buildconf
</span><span class='line'>$ autoconf configure.ac
</span><span class='line'>$ ./configure
</span><span class='line'>$ make
</span><span class='line'>$ sudo make install</span></code></pre></td></tr></table></div></figure>


<h1>第三方软件安装</h1>

<p>在新得立搜索c-ares，然后安装相应的库。</p>

<h1>终端安装</h1>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install libc-ares2 libc-ares-dev</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[我们应该说]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/25/wo-men-ying-gai-shuo/"/>
    <updated>2014-03-25T22:40:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/25/wo-men-ying-gai-shuo</id>
    <content type="html"><![CDATA[<p><img src="http://blog.sunvi.cc/UploadFiles/2010-7/91531332357.jpg" alt="alt text" /></p>

<p>不知我从什么时候开始厌倦了这个社会，每个人都成了个体（宅男宅女遍及各个房间）或者融入到了一个小小的群体中，选择沉默，选择漠视这个社会，整个世界变得缺乏生机。难道就是因为年龄的增长而变得成熟，一切不关自己的事情都是明哲保身吗？难怪一个时代的改变都是由一些愤青推动的，尽管这些人有大部分为此洒了热血，但值得歌颂。</p>

<p>最近有一篇文章讲述了几个失败（一分钱都没有筹集到）的众筹项目，作者评论了一个蛋糕的项目——只有你的朋友才会违心的说这个做起来一定会成功。当我看到那张图片的时候，一点吃的欲望都没有，更不用提去了解它了。如此不堪，作为身边他们身边的朋友却没有说出他们内心真实的想法，这难道就是朋友吗？不是，至少我是这么认为的。说出来，或许会打击他们的信心，却给了他们最真诚的建议。</p>

<!--more-->


<p>当你提出一个想法告知你的朋友的时候，我想你并不只是想炫耀自己的想象力，你肯定想得到他人的反对意见。“这个主意不错”这样的话你需要吗？不需要，能够不断地去完善点子的人会认为这些点子很差劲吗？当然你可以把这句话作为你的起始，后续你应该补上更多的论据，无论你想证明这些是对还是错。</p>

<p>虽然我支持大家说说自己的想法，但也不喜欢那些极度悲观的话语。悲观的人总是喜欢拿先有的BAT说事，总觉得它们会尽一切办法消灭新起之秀；而乐观的人会告诉你——BAT的当年也是在夹缝中求生存，多少次都快趴下了，它们起步的状况并不比你好，甚至比你还差很多。我是一个乐观的人，所以我想象的明天很美好，同时我也算得上是一个理智的人，能够接受那些悲观的言论。</p>

<p>在很多面试的技巧中，经常提到不能说前公司的坏话。难道这也是值得鼓励的吗？这是在提倡漠视错误的存在吗？若是新东家跟老东家是一样的状况，又何必恐惧失去这份工作呢，不然就是从一个火坑跳进了另外一个火坑之中，这不是造孽嘛。面试公司的hr若是能够接受那些公司的不足，那也证明这种毛病已深根在了他们那里。恐惧别人说的，那只能证明自己的懦弱。害怕说出后而失去一些东西，是我们的内心还不够强大。然后我们在沉默中慢慢老去，从此一文不值。</p>

<p>在公司的时候，做着那些事情，明明觉得有些不妥，却闭口不言，感觉公司的成败跟自己毫无关系，大不了就是重新换一份工作。而一个老板却别无选择，这是他的所有，必须尽心尽力，拼了老命去做所有的事情。这或许就是老板和员工的区别，他们的思考截然相反。这也应该是我们终生为员工的本质原因。很多公司提倡员工提意见（好的公司对合理的建议还有奖励），我想这是老板在寻求一些“未来老板”的改善建议。</p>

<p>说了这么多，也不知道自己在谈论些什么，也就是一次随意的记录。不管怎样，我们都应该说出更多内心的东西，而不是在沉默中消亡。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[16日杂谈]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/16/16ri-za-tan/"/>
    <updated>2014-03-16T12:46:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/16/16ri-za-tan</id>
    <content type="html"><![CDATA[<p>在这个移动互联的大数据时代，几乎没有个人隐私，我也没必要隐藏什么了，所以有了这么一个决定：空间中的私密日记总计20篇，现将其中的19篇全部公开。这些文章大部分是在大学期间写的，回过头看看还是有一种成就感的。空间中还有大量的转载文章，是时候把它们腾挪一个地方了。</p>

<p>起先还在考虑是否要把转载的文章备份到其它的地方，可发现自己这么多年都没有再去关照过它们，最后一狠心就把它们全部删除了。那些文章更多的是鸡汤，喝多了始终没有好处，删除了也不会可惜，但还是要感谢它们陪伴我走过了那些无知而又天真的岁月。目前空间中只保留了一篇其他人（刚哥，一个拥有文艺气息的青年，是我大学四年的舍友）写的文章，其余是个人努力码字的结果。</p>

<p>现在的我变得越来越讨厌无止境的转载（适当的调剂我还是认同的），那简直是在“污染”空间的资讯。别人的行为我无力去改变 ，那就从自己做起，努力写一些属于自己的东西。</p>

<!--more-->


<p>我一直是追求原创的人，经常会为没有属于自己的东西而烦恼。记得高中的语文课在正式上课之前有5分钟的演讲，虽然三年下来轮到每个人没有多少机会，但我始终在写一些属于自己的东西。可能为了一篇文章，我会花费三节晚自习课去书写、改进。演讲的设计是：你在台上演讲，结束后和你坐在一起的两位同学需要对你的演讲作一个点评。所以写完后我会给周边的同学看，让他们发表自己的观点。高一的时候，写过一篇有关“体毛”的文章，周边的同学看完后都大笑，他们“鼓励”我就如此这般演讲，其实我心里清楚——他们看重的并不是我的独立思考，而是想在次日的语文课上看到一些搞笑的事情发生。我清楚在即将到来的时刻会发生什么，但我坚持了自己最初的决定。我依旧清晰记得他们以嬉笑的态度在评论着我的演讲，那不是一种尊重和认同，我不需要。</p>

<p>高中三年的演讲，每个人都经历过了几场，但我始终没有记下一些有价值的演讲（理由很简单，他们只是拿着《读者》、《青年文摘》等杂志在有感情的朗读，或者这些文章大伙都已看过，谁又会再次专心的听呢），有一个人例外。这个人就是龙兄，他的文章是“厕论”，描述了当时很多人上厕所不冲的现象。很具体的内容我不记得，但我对这次演讲记忆深刻。坐在位子上的同学听到这些后是捧腹大笑，但这样做的结果只有一个——打击一个少年的积极性。时至今日，我依然会对龙兄说——即便所有人否定了你的演讲，我始终支持你，那时的我永远站在你那一边。</p>

<p>原创的演讲有个好处：别人在没有听完之前，不会知道你要描述的事件、表达的观点，大部分时间他们会竖起耳朵专心地听你。这就是我想达到的效果。我的文章写得不好，但我在描述自己的东西，在高中期间为数不多的几次演讲中，整个教室在我上台后是异常安静的，这或许跟我的大嗓门也有一些关系。在这一点效果上，我击败了很多人。高中毕业已多年，你们是否还记得我在台上高亢激昂？</p>

<p>搬到新校区后，母亲曾去向一些老师咨询我的状况。母亲告诉我关于语文方面的评价是”演讲自己写的东西是不错的，但欠缺了一些，是在死背“（显然这不会是一个母亲的评价，况且她不可能亲眼看到我台上的表现）。听到这样的评价，我独自走出了房门，我流泪了（男儿有泪不轻弹，只是未及伤心处）。伤心并不是因为我的文章不如他人（事实就是如此，我不会自欺），是我的独立思考没有得到肯定而是一种磨灭。那句话成为了我内心的一块伤疤，至今未能愈合。这一句话，并没有把我彻底打趴下，这么多年后我始终在创造属于自己的东西。</p>

<p>文章删除完毕，重新去浏览了一下标题，发现11和12两年并没有发表过任何的文章。这两年我都去哪里了？我已淡忘了过去的那些记忆，再也寻找不回来（不愿舍弃却又无能为力），或许我把那些时间贡献给了论坛。写作总是断断续续，能走多远是一个未知数，尽力把这条路走得长一些。</p>

<p>擦掉过去的眼泪，收拾行囊，携同你，和你们一起结伴上路，朝着属于我们的方向继续前行，我相信屌丝终究有逆袭的那一刻！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[域名解析库]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/15/adnsyu-ming-jie-xi-ku/"/>
    <updated>2014-03-15T10:59:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/15/adnsyu-ming-jie-xi-ku</id>
    <content type="html"><![CDATA[<h1>一个问题</h1>

<p>在实际的开发中遇到了不能域名解析的情况，在网上搜集了大量的资料，发现有网友遇到了和我一样的状况，所以把查找的资料汇总一下，作个记录。以下信息摘自<a href="http://comments.gmane.org/gmane.comp.web.curl.library/39150">这里</a>：</p>

<blockquote><p>I&rsquo;m using libcurl 7.29.0 on Android with c-ares 1.9.1.</p>

<p>I&rsquo;ve been noticing a bug on a Samsung Galaxy S3 &amp; Samsung Galaxy Note 2 (and possibly other devices too) when the bearer switches from wifi to 3G where I can no longer connect to a host.</p>

<p>If I undefine USE_ARES (build without c-ares) then this issue is gone, but I would like to keep c-ares for performance.</p>

<p>Some other (useful?) info: <br/>
1) Switching back to the original bearer will allow a connection again <br/>
2) I tried performing a curl_global_cleanup() and curl_global_init(CURL_GLOBAL_ALL) during the switch, but it didn&rsquo;t seem to help.</p>

<p>If anyone knows of anything that I can do to continue to use c-ares I would greatly appreciate it!</p></blockquote>

<!--more-->


<h1>Android NDK 编译c-ares</h1>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export NDK=/tmp/android-ndk-r8b
</span><span class='line'>
</span><span class='line'># Create the standalone toolchain
</span><span class='line'>$NDK/build/tools/make-standalone-toolchain.sh \
</span><span class='line'>--platform=android-9 \
</span><span class='line'>--install-dir=/tmp/my-android-toolchain
</span><span class='line'>
</span><span class='line'>export PATH=/tmp/my-android-toolchain/bin:$PATH
</span><span class='line'>export SYSROOT=/tmp/my-android-toolchain/sysroot
</span><span class='line'>export CC="arm-linux-androideabi-gcc --sysroot $SYSROOT"
</span><span class='line'>
</span><span class='line'># Download the latest release
</span><span class='line'>curl -O http://c-ares.haxx.se/download/c-ares-1.9.1.tar.gz
</span><span class='line'>tar xvfz c-ares-1.9.1.tar.gz
</span><span class='line'>
</span><span class='line'># Configure
</span><span class='line'>cd c-ares-1.9.1 && mkdir build
</span><span class='line'>./configure --prefix=$(pwd)/build \
</span><span class='line'>--host=arm-linux \
</span><span class='line'>--disable-shared \
</span><span class='line'>CFLAGS="-march=armv7-a"
</span><span class='line'>
</span><span class='line'># Build and install
</span><span class='line'>make && make install</span></code></pre></td></tr></table></div></figure>


<h1>adns接口介绍及示例</h1>

<p>adns是一个开源的dns解析库，官方文档点击<a href="http://www.chiark.greenend.org.uk/~ian/adns/">这里</a>。</p>

<p>初始化</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_state   adns;
</span><span class='line'>adns_query   query;
</span><span class='line'>adns_answer   *answer;</span></code></pre></td></tr></table></div></figure>


<p>
函数原型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int adns_init(adns_state *newstate_r, adns_initflags flags, FILE *diagfile /*0=&gt;stderr*/);</span></code></pre></td></tr></table></div></figure>


<p>
举例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_init(&adns, adns_if_noenv, 0);</span></code></pre></td></tr></table></div></figure>


<p>提交待解析的域名 <br/>
函数原型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int adns_submit(adns_state ads, 
</span><span class='line'>                const char *owner, 
</span><span class='line'>                adns_rrtype type, 
</span><span class='line'>                adns_queryflags flags, 
</span><span class='line'>                void *context, 
</span><span class='line'>                adns_query *query_r);</span></code></pre></td></tr></table></div></figure>


<p>
举例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_submit(adns, argv[1], adns_r_a, (adns_queryflags) 0, NULL, &query);</span></code></pre></td></tr></table></div></figure>


<p>检测是否有域名已检测完成 <br/>
函数原型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int adns_check(adns_state ads,
</span><span class='line'>           adns_query *query_io,
</span><span class='line'>           adns_answer **answer_r,
</span><span class='line'>           void **context_r);</span></code></pre></td></tr></table></div></figure>


<p>
举例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_check(adns, &query, &answer, NULL);</span></code></pre></td></tr></table></div></figure>


<p>函数原型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int adns_wait(adns_state ads,
</span><span class='line'>          adns_query *query_io,
</span><span class='line'>          adns_answer **answer_r,
</span><span class='line'>          void **context_r);</span></code></pre></td></tr></table></div></figure>


<p>
举例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_wait(adns, &query, &answer, NULL);</span></code></pre></td></tr></table></div></figure>


<p>检测是否已完成所有提交的域名的解析 <br/>
函数原型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>void adns_finish(adns_state ads);</span></code></pre></td></tr></table></div></figure>


<p>
举例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adns_finish(adns);</span></code></pre></td></tr></table></div></figure>


<p>示例代码<code>testdns.c</code>（解析IPv4地址可使用adns v1.2或adns v1.4，解析IPv6地址使用adns v1.6）：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;sys/errno.h&gt; 
</span><span class='line'>#include &lt;sys/socket.h&gt;                    
</span><span class='line'>#include &lt;netinet/in.h&gt;                      
</span><span class='line'>#include &lt;arpa/inet.h&gt; 
</span><span class='line'>#include &lt;stdlib.h&gt;
</span><span class='line'>#include &lt;string.h&gt;
</span><span class='line'>#include &lt;stdio.h&gt;
</span><span class='line'>
</span><span class='line'>#include "adns.h"
</span><span class='line'> 
</span><span class='line'>int test_dns(char *host)   
</span><span class='line'>{ 
</span><span class='line'>    int tryCount = -1; 
</span><span class='line'>    int adns_cname = 0;
</span><span class='line'>    adns_state ads; 
</span><span class='line'>    adns_initflags flags;  
</span><span class='line'>    adns_query quer = NULL;  
</span><span class='line'>    flags = adns_if_nosigpipe | adns_if_noerrprint; 
</span><span class='line'>    
</span><span class='line'>    adns_init(&ads, flags, NULL); 
</span><span class='line'>    adns_submit(ads, host, (adns_rrtype) adns_r_a, (adns_queryflags) 0, NULL, &quer);  
</span><span class='line'> 
</span><span class='line'>    while(tryCount &lt; 32) { 
</span><span class='line'>        tryCount += 1; 
</span><span class='line'>           
</span><span class='line'>        adns_answer *ans; 
</span><span class='line'>        int res = adns_check(ads, &quer, &ans, NULL); 
</span><span class='line'>        if(res == 0) {       
</span><span class='line'>            if (ans-&gt;status == adns_s_prohibitedcname) { 
</span><span class='line'>                char cname[128]; 
</span><span class='line'>                strncpy(cname, ans-&gt;cname, 127); 
</span><span class='line'>                cname[strlen(ans-&gt;cname)] = '\0';       
</span><span class='line'>                adns_query quer = NULL; 
</span><span class='line'>                adns_submit(ads, cname, (adns_rrtype) adns_r_addr, (adns_queryflags) 0, 
</span><span class='line'>                            NULL, &quer);       
</span><span class='line'>                adns_cname = 1; 
</span><span class='line'>            } else { 
</span><span class='line'>          #if 1
</span><span class='line'>                //resolve IPv4 address                 
</span><span class='line'>              if(adns_cname) 
</span><span class='line'>                    printf("ip: %s\n", ans-&gt;status == adns_s_ok ? 
</span><span class='line'>                            inet_ntoa(ans-&gt;rrs.addr-&gt;addr.inet.sin_addr) : "no"); 
</span><span class='line'>               else 
</span><span class='line'>                    printf("ip: %s\n", ans-&gt;status == adns_s_ok ? 
</span><span class='line'>                            inet_ntoa(*(ans-&gt;rrs.inaddr)) : "no");             
</span><span class='line'>          #else
</span><span class='line'>                //resolve IPv6 address
</span><span class='line'>                if(adns_cname){
</span><span class='line'>                    if(ans-&gt;status == adns_s_ok){
</span><span class='line'>                        char buf[INET6_ADDRSTRLEN];
</span><span class='line'>                        inet_ntop(AF_INET6, &ans-&gt;rrs.addr-&gt;addr.inet6.sin6_addr, 
</span><span class='line'>                                    buf, sizeof(buf));
</span><span class='line'>                        printf("ip: %s\n", buf);
</span><span class='line'>                    }
</span><span class='line'>                    else{
</span><span class='line'>                         printf("no\n");
</span><span class='line'>                     }
</span><span class='line'>                 }
</span><span class='line'>                 else{
</span><span class='line'>                     if(ans-&gt;status == adns_s_ok){
</span><span class='line'>                         char buf[INET6_ADDRSTRLEN];
</span><span class='line'>                         inet_ntop(AF_INET6, ans-&gt;rrs.in6addr, buf, sizeof(buf));
</span><span class='line'>                         printf("ip: %s\n", buf);
</span><span class='line'>                     }
</span><span class='line'>                     else{
</span><span class='line'>                          printf("no\n");
</span><span class='line'>                     }
</span><span class='line'>              }
</span><span class='line'>          #endif
</span><span class='line'>                 adns_finish(ads); 
</span><span class='line'>                 break; 
</span><span class='line'>            }                   
</span><span class='line'>        }        
</span><span class='line'>        else if (res == ESRCH || res == EAGAIN) { 
</span><span class='line'>            sleep(1); 
</span><span class='line'>        } else { 
</span><span class='line'>            printf("host(%s) is err!\n", host); 
</span><span class='line'>        } 
</span><span class='line'>    }   
</span><span class='line'>    
</span><span class='line'>    return 0; 
</span><span class='line'>} 
</span><span class='line'> 
</span><span class='line'>int main(int argc, char *argv[]) { 
</span><span class='line'>    char host[128]; 
</span><span class='line'>    
</span><span class='line'>    while(1) { 
</span><span class='line'>        scanf("%s", host); 
</span><span class='line'>        
</span><span class='line'>        if(strlen(host) == 3 && strcmp(host, "eof")) 
</span><span class='line'>            break; 
</span><span class='line'>            
</span><span class='line'>        test_dns(host); 
</span><span class='line'>    } 
</span><span class='line'>    
</span><span class='line'>    return 0; 
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Makefile</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CFLAGS = -g 
</span><span class='line'>TARGETS = libadns.a 
</span><span class='line'>LIBOBJS = types.o event.o query.o reply.o general.o setup.o \
</span><span class='line'>            parse.o poll.o check.o 
</span><span class='line'> 
</span><span class='line'>all: testdns 
</span><span class='line'> 
</span><span class='line'>testdns: testdns.c libadns.a 
</span><span class='line'>libadns.a: $(LIBOBJS) 
</span><span class='line'>  $(AR) cq $@ $(LIBOBJS)
</span><span class='line'>    
</span><span class='line'>clean: 
</span><span class='line'>  rm -f $(LIBOBJS) libadns.a *~ config.status 
</span><span class='line'> 
</span><span class='line'>distclean: clean 
</span><span class='line'>  rm -f config.h .depend   
</span><span class='line'> 
</span><span class='line'>$(LIBOBJS): adns.h internal.h config.h</span></code></pre></td></tr></table></div></figure>


<p>下载adns-1.2的源码，然后解压，到<code>adns-1.2/</code>目录下执行<code>./configure</code>，进入到<code>src/</code>目录并加入以上的<code>testdns.c</code>、<code>Makefile</code>两个文件，<code>make</code>编译后就得到了我们需要的测试程序。</p>

<p><big>参考链接：</big><br/>
<a href="http://comments.gmane.org/gmane.comp.web.curl.library/39150">libcurl + c-ares on Android</a> <br/>
<a href="http://blog.chinaunix.net/uid-20535334-id-3757613.html">Android NDK 编译c-ares</a> <br/>
<a href="http://c-ares.haxx.se/">c-ares</a> <br/>
<a href="http://www.cnblogs.com/sunada2005/p/3232600.html">adns解析库——域名解析实例(C++、linux)</a> <br/>
<a href="http://www.chiark.greenend.org.uk/~ian/adns/">GNU adns</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[剑问君答：PCB layout女豪]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/14/jian-wen-jun-da-%3Apcblayoutnu-hao/"/>
    <updated>2014-03-14T01:04:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/14/jian-wen-jun-da-:pcblayoutnu-hao</id>
    <content type="html"><![CDATA[<p><img src="http://static.open-open.com/news/uploadImg/20131107/20131107194506_945.jpg" alt="alt text" /></p>

<p>残剑：毕业那会儿，如果你选择待在家乡的城市，也可以谋求一份好的工作，然后舒适的生活。而你决定背上行李，同朋友们一同来到深圳这个大城市寻求机会，是什么原因促使你做这样一个决定？</p>

<p>东方如杨：如果我现在生活在我们那个小城里，小城都有很多故事，但生活大体是很明确的：一份政府部门的工作，有很多可自由支配的时间，没有什么太大外在的压力。当初毕业也倒不是冲着深圳的“冒险家的天堂”名头来的，只是觉得自己所知、所学、所见太少，也不想依靠家里关系才能开展生活，想到跟我生活环境不一样的地方去开拓下眼界。以前总觉得人生当如披荆斩棘，针针见血才是精彩，现在觉得你心里面有什么样的生活，你就会有什么样的生活，生活不在别处，在自己心里。</p>

<hr />

<p>残剑：据我所知，工作之前你根本没有接触过PCB layout，对元器件也知道的不多，你是如何一步步熟悉起来，达到工作所需的要求？</p>

<p>东方如杨：PCB Layout是属于硬件范畴的，理论知识不缺乏，本专业基本知识而已，无非就是根据客户需求，搭建不同电路罢了。主要就是熟悉怎么操作软件，看了很多资料，懂了基本操作，做上一个项目，在项目中发现问题，总结问题，基本就没有什么难的了，多实践就好了。</p>

<!--more-->


<hr />

<p>残剑：PCB layout是一个大的概念，你在具体的工作中主要做些什么工作？</p>

<p>东方如杨：PCB Layout就是绘制印刷电路板，完成电子元器件之间的线路连接和功能实现。包括电路原理图的设计，跟布板，做好印刷资料发给制板厂。在你离开深圳不久，我离职玩了半年，然后到一个刚成立的创业公司，所做的工作不止上面的，还包括手机成本核算，跟工厂确定PCB生产工艺一些事情。</p>

<hr />

<p>残剑：除了工作，在深圳这几年，还做过一些其它让自己觉得自豪的事情吗？事情无关大小，只要它突破了原有的自己就好。</p>

<p>东方如杨：工作了几年，我觉得比较满意的是，自己心态比之前好了不少。不会随大流去追求一些什么，不再纠结在乎一些身外之物，从而降低生活质量跟幸福度。我觉得最好的生活就是家庭和睦，家人跟自己身体健康，每天有开心的小事。</p>

<hr />

<p>残剑：从和你的交谈中，也能看出你并不是十分喜欢自己现有的工作。我们不能假设之前的抉择，但我们可以勾画未来的生活。对于未来自己的一个职业方向，有什么考虑和想法吗？</p>

<p>东方如杨：当初文理分科的是时候，之所以选择理科就是因为自己理科太差，人很多时候不就是自己折磨自己么。毕业了，就业的时候，选的这个行业也是怕辜负了自己所学专业，现在几年下来，尝试过了，发现自己不是真心喜欢，兴趣不在这儿，也不想继续自我折磨了。未来的职业还说不好，我是个想法多，执行力差的人，还有严重的拖延症，多谋而无一断，我鄙视自己，但我想未来我会按照自己的兴趣走，至少不会继续做研发方面工作了。</p>

<hr />

<p>残剑：上次你告诉我深圳也在建立自贸区，很多人认为自贸区之类的政策是给资金雄厚的个人或企业而准备的，但我认为机会总是给有准备和有想法的人。虽然我们没有雄厚的资金、超凡的能力，但我们可以想象这片天空的发展，对于一个普通的个体你认为会有怎样的机会呢？</p>

<p>东方如杨：我赞同，机会是给有想法的人准备的。在这个时代，不缺资金，缺的是好的想法。只要有不一样的想法，秉承正确的价值观，做自己想做的事情，不去盲目迎合市场，不管在哪里，什么时候，都能有一席之地。我感觉自贸区就像是河对面一座金山，很多装备好的先掘到金，进场很多人在找方位掘金，而我作为一个普通的观望者，摆摆渡，划船送他们去对岸，可能比找不到方位的掘金者还靠谱些。具体能在自贸区做些什么，我也没想好，要不这会儿我会用事实告诉你。</p>

<hr />

<p>残剑：你对科技也是十分关注的，有看到或者听到什么好玩、有趣的东西和大家分享一下吗？是否有好好的体验一下现在的移动互联生活？</p>

<p>东方如杨：我现在用的一个软件叫Duolingo，语言学习类软件，我觉得不错，考虑了用户感受，也不功利，没有广告推送，游戏式的学习，能让人坚持学。</p>

<hr />

<p>残剑：电商导购虽然会遭受巨头的打压，但我觉得它的未来还是很有前途的，毕竟那些电商平台不能满足所有客户的需求。当我提到这个事物的时候，在你的大脑中又产生了怎样的想法呢？</p>

<p>东方如杨：我想到了微信，当初是交由QQ聊天所在事业部做的，但当时事业部负责人觉得QQ聊天已经很成熟了，微信功能跟QQ大同小异，不看好，就外发给广州研究院去做，后来微信成功了，深圳这边原本负责这个的人后悔莫及，据说因为对这款产品定位不成功，引咎辞职。这阶段腾讯靠微信在互联网乱战中出力不少，腾讯将推出微信网络信用卡，跟阿里的支付宝网络信用卡又扯上了。</p>

<hr />

<p>残剑：不光是科技，生活的各个方面，你有什么样的遐想？或者说，在你的头脑中，你认为未来的生活又会是怎样一幅场景？</p>

<p>东方如杨：在儒勒·凡尔纳的《海底两万里》里面首次提到潜艇，过了很多年，发明了潜艇应用与军事战争中（我小时候记得就是这样，不知道准确不）。那些出现在科幻片中的，或许不久后就应用在我们的生活中。说到未来生活，想起了我初中的政治老师的话：在未来，劳动是有能力的人的特权，你们这些懒人到了共产主义，想劳动都没门儿。让共产主义， 让乌托邦快些来到吧，哈哈哈，扯远了。</p>

<hr />

<p>残剑：跟你聊天的时候，总是说要去做某件事，可从未真正执行过，自己的意志力很差。很多事情贵在坚持，对于这方面你有怎样的看法？我知道你阅读的书籍很多，可以说说其中的一些示例，也可以谈谈普通生活中最平凡的例子。</p>

<p>东方如杨：我有严重的拖延症，说的多，做的少，这是坏习惯，得改。什么时候，真的开始了，最困难的就过去了。要不，三五年过去，还在原地踏步。这些年，看的书越多，越感觉自己浅薄，懂的少，厉害的人太多。从前觉得一些很牛逼的人现在看来不过尔尔，反倒是被一些人的生活智慧跟想法感动到，觉得不是凡人。越来越多的人在商业中注入佛法精神，我觉得有意思。推荐几档节目：《东吴相对论》、《国学堂》、《冬曦好讲究》、《伯凡非常道》、《开卷八分钟》。</p>

<hr />

<p>残剑：我缺乏面对生活的勇气，离开了这个冒险家的城市。生活了这么久，你对它是一个怎样的映像，又有什么样的看法呢？</p>

<p>东方如杨：深圳生活节奏快，生活压力大，气候温暖潮湿，绿化好。一个地方待久习惯了，反而对其他地方不适应，还是觉得看个人，自己心里有什么样的生活，就会过上什么样的生活。</p>

<hr />

<p>残剑：实际的生活告诉我要现实点，真怕自己的棱角被这个残酷的社会磨平，从而失去对梦想的追求。对于生活，你又是一个怎样的态度呢？</p>

<p>东方如杨：我希望是不管遇到什么，都能乐观对待，但我是一个容易想太多人，所以纠结过很多次，我们要生活，必须现实，不要盲从就好，房子，车子，有那么重要吗？为了这些，降低生活质量就不值了，当然土豪例外。人生这么短，又充满着各种意外，及时开心，尽快享受生活。被现实改变，是肯定的，但我觉得，我会慢慢开始，尊崇自己的兴趣，不那么强迫自己去补自己的短板，按自己心意走。</p>

<hr />

<p>残剑：每年都能看到你在空间中更新那些出去旅行的照片，就我个人而言，我比较看来中国未来的旅游市场。你出去是认知一个新的世界，欣赏风景，陶冶情操，还是有一些自己独特的想法？</p>

<p>东方如杨：我很少放照片吧，哈哈哈。我现在的想法是多带父母出去走走，他们年纪大了，我怕以后遗憾。我想带他们去其他地方走走，让他们看看这个地球其他地方，跟我们不一样的人，他们的风景，他们的生活。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu下的音视频工具]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/11/ubuntuxia-de-yin-shi-pin-gong-ju/"/>
    <updated>2014-03-11T23:02:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/11/ubuntuxia-de-yin-shi-pin-gong-ju</id>
    <content type="html"><![CDATA[<p>Whether you want to listen to music on your smartphone or watch movies on your iPad, you may need to convert you media files from one format to another depending on what your devices support.</p>

<p>Transmageddon Video Transcoder is a great media converter for Ubuntu. It converts audio and video files, it has a simple interface, and it’s free.</p>

<p>详细情况参考：<a href="http://linzhibin824.blog.163.com/blog/static/7355771020133754752964/">Ubuntu下音/视频转换工具transmageddon</a></p>

<hr />

<p>Handbrake是一款跨平台的视频转换器，无须任何技巧即可完成对视频的格式换转。特性：</p>

<ul>
<li>跨平台(Linux\Win\Mac)；</li>
<li>输入源：支持DVD，如VIDEO_TS、DVD映像文件、DVD 光盘、.VOB、.TS，视频格式方面几乎支持所有视频格式；</li>
<li>输出源：MP4(M4V)、MKV\MPEG-4(ffmpeg), H.264(x264), or Theora(libtheora)\AAC, CoreAudio AAC(OS X Only), MP3, or Vorbis. AC-3 pass-through, DTS pass-thorugh(MKV only)；</li>
<li>支持设置格式文件的质量、参数。</li>
</ul>


<p>详细情况参考：<a href="http://blog.ubuntusoft.com/handbrake.html#.UvWQsqFBr3w">Handbrake：优秀的视频转换器</a></p>

<!--more-->


<hr />

<p>Arista是一个易于使用的多媒体转换的GNOME桌面应用。它着重于目标的转换媒介，即设备要发挥新闻媒体上。它的目的是供人谁不熟悉音频和视频编码，并希望有一个简单的方法来获得他们的多媒体设备。它支持DVD和投入V4L设备以及定期文件。</p>

<p>详细情况参考：<a href="http://blog.ubuntusoft.com/ubuntu-next-video-converter-arista.html#.UvWQt6FBr3w">ubuntu下视频转换器：arista</a></p>

<hr />

<p>今天和大家分享Ubuntu下的视频转换工具与DVD制作！首先出场的是DeVeDe这个工具，在ubuntu软件中心就能下载了，或者用文字终端安装:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install devede</span></code></pre></td></tr></table></div></figure>


<p>详细情况参考：<a href="http://www.heimizhou.com/media-converter-in-ubuntu.html">Ubuntu视频转换工具与DVD制作</a></p>

<hr />

<p>常听音乐和歌曲的人总免不了音频之间的互相转换，这款软件支持将源文件（好像支持很多）转化成MP3、Wav、Flac、Ogg，不支持APE。另外好像也不能转换CD。反正就提供一个转换成这四种格式的简单功能。功能虽单一，但蛮简单且好用的，所以推荐给大家。安装方法如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install soundconverter</span></code></pre></td></tr></table></div></figure>


<p>详细情况参考：<a href="http://hi.baidu.com/rlhpuybgopbiqwd/item/d1c1ee11c45f9f48e65e0638">SoundConverter──音频转换软件</a></p>

<hr />

<p>Audacity® 是一个声音编辑程序，它拥有一套完整的工具（用于立体声声道可视化）和过滤器，支持您轻松修改所选的音频波形部分。Audacity 是一个可编程编辑器，因此您可以根据项目的扩展需要扩展该编辑器的功能。Audacity 的功能十分强大，从制作简单的音频录制到编辑多声道作品都可以轻松完成。</p>

<p>详细情况参考：<a href="http://www.ibm.com/developerworks/cn/opensource/os-audacity/#ibm-pcon">功能强大的Audacity</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[gethostbyname和hostent结构体详解]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/11/gethostbynamehe-hostentjie-gou-ti-xiang-jie/"/>
    <updated>2014-03-11T22:43:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/11/gethostbynamehe-hostentjie-gou-ti-xiang-jie</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct hostent *gethostbyname(const char *name);</span></code></pre></td></tr></table></div></figure>


<p>gethostbyname函数根据域名解析出服务器的ip地址，它返回一个结构体struct hostent：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;netdb.h&gt;
</span><span class='line'>
</span><span class='line'>struct hostent {
</span><span class='line'>  char  *h_name;            /* official name of host */
</span><span class='line'>  char **h_aliases;         /* alias list */
</span><span class='line'>  int    h_addrtype;        /* host address type */
</span><span class='line'>  int    h_length;          /* length of address */
</span><span class='line'>  char **h_addr_list;       /* list of addresses */
</span><span class='line'>}
</span><span class='line'>#define h_addr h_addr_list[0]  /* for backward compatibility */</span></code></pre></td></tr></table></div></figure>


<p>除了服务器的ip地址外，这个结构体还包含了更多服务器的信息，有：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>char *h_name
</span><span class='line'>
</span><span class='line'>This is the “official” name of the host. </span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>char **h_aliases
</span><span class='line'>
</span><span class='line'>These are alternative names for the host, represented as a null-terminated vector of strings. </span></code></pre></td></tr></table></div></figure>


<p>主机的可选名字，以NULL作为结束标记。</p>

<!--more-->


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int h_addrtype
</span><span class='line'>
</span><span class='line'>This is the host address type; in practice, its value is always either AF_INET or AF_INET6, with the latter being used for IPv6 hosts. In principle other kinds of addresses could be represented in the database as well as Internet addresses; if this were done, you might find a value in this field other than AF_INET or AF_INET6. See Socket Addresses. </span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>int h_length
</span><span class='line'>
</span><span class='line'>This is the length, in bytes, of each address. </span></code></pre></td></tr></table></div></figure>


<p>ip地址的长度，ipv4对应4个字节。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>char **h_addr_list
</span><span class='line'>
</span><span class='line'>This is the vector of addresses for the host. (Recall that the host might be connected to multiple networks and have different addresses on each one.) The vector is terminated by a null pointer. </span></code></pre></td></tr></table></div></figure>


<p>一般主机可以有多个ip地址，比如www.163.com就有121.14.228.43和121.11.151.72两个ip，h_addr_list就用来保存多个ip地址。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>char *h_addr
</span><span class='line'>
</span><span class='line'>This is a synonym for h_addr_list[0]; in other words, it is the first host address.</span></code></pre></td></tr></table></div></figure>


<p>即为h_addr_list[0]，表示第一个地址，这个符号其实是兼容老系统而存在的。</p>

<p>写一个程序来获取主机的详细信息：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;stdio.h&gt;
</span><span class='line'>#include &lt;string.h&gt;
</span><span class='line'>#include &lt;stdlib.h&gt;
</span><span class='line'>#include &lt;sys/types.h&gt;
</span><span class='line'>#include &lt;sys/socket.h&gt;
</span><span class='line'>#include &lt;netdb.h&gt;
</span><span class='line'>#include &lt;netinet/in.h&gt;
</span><span class='line'>#include &lt;arpa/inet.h&gt;
</span><span class='line'>#include &lt;sys/socket.h&gt;
</span><span class='line'>
</span><span class='line'>#define SERVPORT 80
</span><span class='line'>
</span><span class='line'>int main(int argc, char **argv)
</span><span class='line'>{
</span><span class='line'>    int i, sockfd;
</span><span class='line'>    struct hostent *host;
</span><span class='line'>    struct sockaddr_in serv_addr;
</span><span class='line'>
</span><span class='line'>    if ((host = gethostbyname(argv[1])) == NULL) {
</span><span class='line'>        printf("gethostbyname error\n");
</span><span class='line'>        exit(0);
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    printf("official name: %s\n\n", host-&gt;h_name);
</span><span class='line'>    printf("address length: %d bytes\n\n", host-&gt;h_length);
</span><span class='line'>
</span><span class='line'>    printf("host name alias: \n");
</span><span class='line'>    for (i = 0; host-&gt;h_aliases[i]; i++) {
</span><span class='line'>        printf("%s\n", host-&gt;h_aliases[i]);
</span><span class='line'>    }
</span><span class='line'>    printf("\naddress list: \n");
</span><span class='line'>
</span><span class='line'>    for (i = 0; host-&gt;h_addr_list[i]; i++) {
</span><span class='line'>        if ((sockfd = socket(AF_INET, SOCK_STREAM,0)) == -1) {
</span><span class='line'>            printf("socket error\n");
</span><span class='line'>            exit(0);
</span><span class='line'>        }
</span><span class='line'>        // 先清零，然后用struct sockaddr_in来填值
</span><span class='line'>        bzero(&serv_addr, sizeof(serv_addr));
</span><span class='line'>        serv_addr.sin_family = AF_INET;
</span><span class='line'>        serv_addr.sin_port = htons(SERVPORT);
</span><span class='line'>        /* h_addr_list[i]指向in_addr类型 */
</span><span class='line'>        serv_addr.sin_addr = *((struct in_addr *)host-&gt;h_addr_list[i]);
</span><span class='line'>        const char *ip = inet_ntoa(serv_addr.sin_addr);
</span><span class='line'>        printf("connect to %s  ", ip);
</span><span class='line'>
</span><span class='line'>        // 系统调用的时候，把sockaddr_in转换成sockaddr
</span><span class='line'>        if (connect(sockfd, (struct sockaddr *)&serv_addr, \
</span><span class='line'>                    sizeof(struct sockaddr)) == -1) {
</span><span class='line'>            printf("error\n");
</span><span class='line'>            exit(0);
</span><span class='line'>        }
</span><span class='line'>        printf("success\n");
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    return 0;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>这个程序首先调用gethostbyname得到服务器的各种信息，其中就包含它拥有的ip地址，保存在h_addr_list中，然后对于h_addr_list中的每个ip地址，都调用connect连接其80端口。h_addr_list保存的ip地址类型是char *，struct sockaddr_in中sin_addr的类型是struct in_addr，而程序中却直接把h_addr_list[i]强制转换成struct in_addr *</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>serv_addr.sin_addr = *((struct in_addr *)host-&gt;h_addr_list[i]);</span></code></pre></td></tr></table></div></figure>


<p>这是没有问题的，因为h_addr_list保存的并不是真正的字符串，而是指向struct in_addr类型的指针。</p>

<p>另外，struct in_addr用来表示ip地址，本质上是一个long类型，刚好4个字节。然后我们调用inet_ntoa把它转换成可读性更强的dots-and-number字符串。关于ip地址和dots-and-number字符串之间的转换有4个函数：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#include &lt;arpa/inet.h&gt;
</span><span class='line'>/* network to ascii */
</span><span class='line'>char *inet_ntoa(struct in_addr in);
</span><span class='line'>                          
</span><span class='line'>/* ascii to network */
</span><span class='line'>int inet_aton(const char *cp, struct in_addr *inp);
</span><span class='line'>
</span><span class='line'>const char *inet_ntop(int af, const void *src, char *dst, socklen_t size);
</span><span class='line'>                              
</span><span class='line'>int inet_pton(int af, const char *src, void *dst);  /* presentation format to network */</span></code></pre></td></tr></table></div></figure>


<p>inet_ntoa和inet_aton不支持ipv6, 据说迟早要废除，不过目前来说，很多系统都可以看见这两个函数。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[离开拉萨的前夜：卖酸奶的钟阿姨]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/10/chi-kai-la-sa-de-qian-ye-%3Amai-suan-nai-de-zhong-a-yi/"/>
    <updated>2014-03-10T00:28:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/10/chi-kai-la-sa-de-qian-ye-:mai-suan-nai-de-zhong-a-yi</id>
    <content type="html"><![CDATA[<p><img src="http://images3.ctrip.com/images/wri/Pwri747117.jpg" alt="alt text" /></p>

<p>距离我的目的地还剩10多分钟路程的时候，看到了一个卖牦牛酸奶的小摊位，有几个旅客坐在那里喝着。老板是一个阿姨，是内地人，见到的第一眼没有特别的感觉，只把她当作一个普普通通的摊主。对于一个除了只吃米饭而不喜欢吃其它东西的我，酸奶并不能引起我多大的兴趣，但既然来到了这里，不想错失这么一次机会，也想尝尝它的味道。</p>

<p>询价之后，觉得7块钱有些贵。她也从我的表情中看出了一些端倪，所以她一再强调这是家里自制、没有添加剂的，她也承认相比之前是涨价了（可能在一年前，一杯也就5、6块），但也是随相关的物价而动，不是随意的个人行为。既然如此，顶多也就花费7块钱，花钱买个真实体会还是很值得的。我已记不起它的味道，只知道第一口喝的时候我十分不适应那种味道（也已记不清是否往酸奶里加糖了），慢慢喝之后，觉得这是很不错的美味，彻底接受了这种口感。</p>

<p>酸奶装在纸杯里，接着在上面盖了一个自制的四方形的纸盖，然后用橡皮筋扎紧，要喝的时候吸管直接插进去就可以了。毕竟是在异地，人生地不熟，加上只有我一个人，我没有吱声，就专心的坐在那里喝着。从她和别人的交谈中，我了解到她姓钟，之后的交谈我顺理成章的就叫她钟阿姨了。</p>

<!--more-->


<p>钟阿姨是广东潮州人，早年追随援藏的丈夫（他是一名教书匠）来到这里的，在这里已有40多年，她把大把的青春都贡献给了西赞，见证了这个区域的发展。她也曾在西宁卖了10年多酸奶，那里的人都认识她，当她提及这事的时候还引以为傲。有个小青年说西宁的酸奶很有名气，并且提了一个模糊的人后，钟阿姨告诉他——他指的那人就是自己，因为家庭的原因她回到了拉萨。她有两个女儿，大女儿毕业了在深圳工作，小女儿在拉萨工作。现在每天晚上在家制作最新鲜的酸奶，上午来卖，卖完了下午还要再回家一次拿来，如果生意好的话，她一天要在家和摊位之间来往多次。</p>

<p>她告诉我她被《藏地牛皮书》写入其中，同时也被多个地方电视台报道过，现在在优酷上也有她的视频。听她的自我介绍，我只是傻笑着面对她，半信半疑，拿出手机在网上查找着她说的一切。又有不少围了上来，钟阿姨一边乐呵呵地忙碌着她的生意，一边和我们交谈着。我以最快的速度查证着她的描述，万能的网络告诉我这一切都是真实的，那时我对她的态度开始了转变，一种敬佩之情油然而生。一个中年妇女竟然如此的时尚（这里并没有贬义的意思，我完全是根据她的经历作出的一个判断），我不得不重新审视她了。</p>

<p>围上的人虽多，但大部分的人跟我起先的想法都差不多，很多的交易未必能够顺利达成。态度转变的那一刹那，我就已经决定要和钟阿姨一起唱一段双簧，尽我所能地配合她的生意。我好像发现新大陆似的，惊奇地说出一声“阿姨，你可真是名人啊，网上真能查到你的信息，牛逼啊”，钟阿姨也立马回道“那当然是真的了，我是不会随便吹牛的”。对于我这么个拿着手机查找、校对信息的游客，其他的游客是信任我的，估计也有很多人是带着《藏地牛皮书》进藏的，也不可能不知道钟阿姨。显然，我的话是有效果的，一些游客也不再砍价而是爽快的买下了，还有一个年轻人要给钟阿姨拍照，她收拾了摊位，配合拍了照。</p>

<p>钟阿姨是一个很会自我营销的人，在人群聚集的时候，她会很详细的介绍自己做过的事情。没有想到，一个不怎么使用手机的阿姨，她竟然会加入一些社交网络去跟年轻人聊天，而且她说她喜欢跟年轻人交谈（大伙不要想歪了啊），她的心态是多么的年轻啊。</p>

<p>我告诉她我吃晚饭时的经历，她告诉我不要做这样的事了，一些人是借着朝圣的名义在骗取钱财，他们在西藏生活的并不困苦，否则在拉萨这么高物价的地方他们根本生存不下去，他们每个月都有政府的补贴，反而是那些在拉萨打拼的内地人过得很艰苦。直到那一刻，我才明白，我当初的同情心并没有任何意义，或许可能成为那些人的笑柄。</p>

<p>我很想听听她聊西藏的一些往事和自己的经历，所以又要了一杯，那时我已经喜欢上了那种味道。当得知我是浙江人的时候，显得异常的兴奋，似乎广东和浙江就是隔壁邻居一样，亲密无比，或许是时代让这两个地方的人走向了相同的道路，它们变得志同道合。我们谈论她的生意，谈论西藏地区可以做的一切生意。</p>

<p>她也询问我的属相，我不知道她是何用意，但也高兴地告诉了她。她告诉我应该找一个属龙的女子，兔龙相配是最合适的。之所这么说，原来她一直在研究命理学以及属相学。她怕我不相信她说的，就给我举了很多现实中的例子。我真该问问她是否研究过星座学，可惜我现在才想起这些。除了那些之外，她也阅读了其它大量的书籍（这一点我深信不疑，从她的谈吐中很容易观察到）。这或许跟他丈夫是教师有很大的关系，但一个人是否会去做一些事情，就跟自身的毅力和觉悟有关了。</p>

<p>第二杯喝完了，我起身要走，钟阿姨劝我坐在那里陪她聊天。时间不早了，布达拉宫广场上的锅庄舞就快开始了，我不想在这里留下遗憾，我还是选择离开，但我告诉她——如果等我回走她还在那里的话，我一定去再喝一杯，陪她谈天说地。其实我很明白，她有什么用意（后来她也告诉了我）。只要有我坐在那里喝奶，摊位就不会显得冷清，就会有人愿意过来询价，然后达成买卖。</p>

<p>很快就到了布达拉宫广场，听着那让人兴奋的音乐，看着人们翩翩起舞，欣赏着布达拉宫的夜景。这般景色我已看过多遍，只因不想留下遗憾，内心才把自己带到了这里。不过，我还是想尽快结束夜景的欣赏，我的内心想着的是那个摊位和钟阿姨，因为那里有真实的故事，而这里一切已成为往事，历史雕塑在这些建筑上却无人述说。在广场上，我似乎只是一个游魂，在四处瞎逛却没有任何的收获。</p>

<p>半个小时很快就过去了，我也往我的住处赶，路过原本的摊位的时候却没有见到她，我有些失望，不过我很快又找到了她的身影。因为天已很晚，没有多少的人流，她收拾了椅子，挪到了另外的一个地方。见到我重新回到她的摊位，她硬是去给我找了条椅子让我坐着。我也很自然的要了一杯酸奶，她要给我便宜一点，可我还是给了她原始的价钱，尽管我知道她赚的比我多（和她的交谈中，我了解到了她每日的销量），可一个人在寒风中经营这生意毕竟不容易，赚的都是辛苦钱。</p>

<p>整个过程，我比较的配合，一直慢悠悠的喝着那杯奶。等有客人来的时候，我们就一起唱双簧。我不是一个喜欢重复的人，所以一直更换着说辞，目的只有一个，就是告诉他们——来西藏一定要到这个摊位喝酸奶，而且味道比超市里的好上千百倍。</p>

<p>期间一个摆首饰品的姑娘跑到了我们的摊位，是来这里寻求帮助的。原来她原本的摊位别人不让她在那里摆了。钟阿姨重新给她找了个摊位，告诉她可以放心在那里做买卖。钟阿姨真是一位热心的人！</p>

<p>在我们共同的努力下，那天的酸奶比以往任何时候卖的都快，这点我也不怀疑，生意就是这么一回事。当只剩下3杯左右的时候，我告诉她我要离开了，因为真的太晚了，在没有人烟的路上回旅社我真的怕出现一些意外。临走时，钟阿姨要送我一杯，我没要，实在是喝得太多了，肚子不能再撑下去了。若干年后，她也准备回到生养她的地方，同时还要出去旅行，可能会到杭州，所以我们彼此留下了号码（可惜我换手机之后就丢失了她的号码）。趁着路上还有其他的行人，我快步回到了住处，等待明天新的启程。</p>

<p>钟阿姨生错了时代，去了一个错误的地方，否则以她的那种能力绝对能够成就一番更大的事业。她懂人性，懂经营，更重要的是有年轻的心态。有去拉萨的朋友，一定要去拜访一下这位钟阿姨，然后品尝一下她家自制的牦牛酸奶。或许我们只有一面之缘，但愿她的生活越来越美满。是她的存在，让我在离开拉萨之前更加了解西藏地区。与当地人交谈，了解那里的民俗、民风，这应该就是旅行的意义吧！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[离开拉萨的前夜：我和化缘者]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/09/chi-kai-la-sa-de-qian-ye-%3Awo-he-hua-yuan-zhe/"/>
    <updated>2014-03-09T16:10:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/09/chi-kai-la-sa-de-qian-ye-:wo-he-hua-yuan-zhe</id>
    <content type="html"><![CDATA[<p><img src="http://www2.beareyes.com.cn/jpic/1/2007/09/20070903_231229_1.jpg" alt="alt text" /></p>

<p>第二天就要和两个北京的小伙伴拼车走318线了，离开拉萨的前一晚，我还是决定再去布达拉宫广场看看，尽管在拉萨的那几日我每天晚上都去那里。如果不再去一次，我会觉得这是一种遗憾，因为我不是一个十分恋旧的人，去过的地方我会相隔很长时间后再去，再去西藏可能会是很多年以后的事情了。</p>

<p>背上书包，从东措青年旅舍出来，独自一人沿北京路一直走。找了一个叫“玉包子”的地方，点了几个菜（真的很不便宜啊，几个菜就几十块，而且打印的票子没有具体的明细，只有一个价格），开始吃饭。正当吃着的时候，进来了几个藏民乞讨，起先我根本没有打算把我的东西拿出一部分给他们，但看到他们去端其他人剩下的食物吃的时候，我改变了自己最初的想法。我和他们坐到了一起，把鸡蛋给了那个藏族小孩，把菜分给了他们，也帮他们买了米饭。我尝试着和他们交流，他们告诉我他们是来朝圣的，其它的问题他只告诉我他听不懂。看到他们的举动，听到他们回复的支支吾吾，及联想到十一黄金假期，我对他们是半信半疑。</p>

<!--more-->


<p>吃完后，他们向我表示了一下谢意也就离开了。我也迅速结束了战斗，背起包跟在了他们的后面，因为我想去证实我的猜测。我不敢靠近，始终保持着一定的距离，生怕被他们察觉，虽然在拉萨城里随处可以看到警厅，但那种恐惧还是会萦绕在我的内心深处。跟着一会儿的功夫，我就跟丢了两个，或许是人流太多，他们已淹没在了人流中。快到大昭寺时，只剩下的一个突然走入了一个小巷，我没有继续前行，我不敢去做这样的冒险，深巷里可能发生的事情太多了（一个内地的老板告诉我，在夜晚的时候一个人或者是情侣不要在八角街每人的地方行走，抢劫、强奸的事情不是没有过，而是太多了）。或许我在跟踪他的时候，我已悄悄被另外两个跟上了，他进入小巷或许只是他们的一个计策。说实话，我并不想这么早早地离开人事，家里的父母等到年老的时候还需要我去照顾，内心的追求还需要我去打拼，所以无论如何我都不能冒险，我要活着回到起先出发的地方。</p>

<p>很多事情也只是因为新奇才毫无顾及地去尝试。听朋友说，在高原最好不要喝烈酒，可能缺氧致死。虽说青稞酒不算是烈酒，但我也买了一罐品尝了一番，可事实告诉我这并不符合我的口味。要知道，这可是我独自出行，万一在异乡出事也是没有人搭理的。</p>

<p>人生有太多的不可能，如果觉得自己不能做到而不去尝试，那么真的永远做不到。若是做了，某种潜能可能就在一瞬间爆发了。基于我的这种想法，我很讨厌那些消极的情绪。</p>

<p>原路返回，重新回到了北京路上。这条路太繁华了，尽管是黑夜，刚巧碰上十一，路上却也走满了行人，所以我也没有过多的恐惧和担心。一路走着，不停的遐想：美丽的风景，旅途美好的艳遇，险峻的道路，路上的奇葩遭遇，当然更多的思考自己未来的人生道路。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MX3使用小记]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/09/mx3shi-yong-xiao-ji/"/>
    <updated>2014-03-09T00:04:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/09/mx3shi-yong-xiao-ji</id>
    <content type="html"><![CDATA[<p><img src="http://img.dgtle.com/forum/201401/10/191428pvwswl9nyy96yv2c.jpg" alt="alt text" /></p>

<p>多少科技行业的大佬站在舞台上，动不动就拿苹果说事，告诉人们——他和他的公司是站在“科技和人文的十字路口”，努力为大众谋求福利，创造更好的科技生活。他们之中又有多少在践行着自己的诺言的呢？说的永远比做的好，内心深处永远没有站在用户的角度去思考。</p>

<p>魅族这个公司给我的映像很好，我觉得它做得比说得好很多。很多人说它在抄袭苹果，我却觉得它是苹果的追随者，努力向手机行业的老大看齐。它一路走来，始终在 打造自己力所能及的工业品质，超越自己永无止限。黑魅族的人也有不少，但使用过它的人大部分对它的评价不错。当苹果和三星都成为街机的时候，你是否会选择 一个小众的品牌呢？</p>

<p>使用MX3有一段时间了，下面说说我对它的使用体验吧。有不满，也有好感，总体感觉是不错的。如果非要给个评分，我给这款产品评8分，一个良好的分数。这里不探讨手机的硬件配置，只谈在使用时的一些体会。</p>

<!--more-->


<p>出厂的原始系统比较的单一，除了基本的应用，初装的第三方应用就几个。相比其它手机不能删除原装应用（不能删除也罢，但它们很讨厌的一直在后台运行，占据着大量的内存），对于喜欢干净的来说是非常有吸引力的。我觉得这点是非常重要的，这才是一个属于自己的系统，没有流氓软件的存在。出厂没有安装大量的垃圾应用，也让魅族失去了一些初装费，但它的举动却赢得了人心。罗永浩在锤子OS发布会上说他们的系统可以删除原装的应用，或许他也深刻的厌恶原装了。</p>

<p>在它的系统设置里，可以禁止App后台运行及开机启动，这种设置可以让你不让一些杂七杂八的推广信息骚扰，从此世界变得安静起来。当然，它也有属于自己的App store，在这里它不会提醒你应用的升级，这对于一些升级控（很多人看到App提示升级的时候，他们总会去升级，不升级的话会觉得碍眼，尽管他们未必使用到新的功能）是有好处的。</p>

<p>现在这款手机采用的是窄边框设计，让人看着赏心悦目。5.1英寸的屏幕足够大，一切阅读显得很舒心。虽然有很多的好处，使用时也有不便之处。对于我这么个小手来说，在发信息的时候必须使用上双手，否则一不小心就有可能摔到地上。在阅读的时候，手也会不经意间触碰到右侧的屏幕，原本在看着前面的段落，突然间就下滑到了底部，所以在阅读的时候必须小心翼翼。</p>

<p>外置音频口设计在底部，这有些不合理，放着音乐的同时用手拿着看电子书的话，容易把那个口子给挡住，使得输出的声音变得很小，所以要时刻注意着握手机的姿势。</p>

<p>电池一直是MX3的痛，起先使用到电量还剩20%左右的时候就会自动关机，到了后来70%电量的时候也会出现这种状况，重启之后又可以继续使用了。如果魅族能够完美的解决电池的问题，那么它就变得完美了。</p>

<p>MWC 2014魅族携手Ubuntu在西班牙巴塞罗那推出了搭载Ubuntu移动操作系统的手机，很有吸引力。关注了这次的移动通信大会，国内的媒体对这件事情报道的很少，或许它们都不太看好这个新兴的移动操作系统，但我觉得这并不阻碍它的发展壮大。Android在这个市场上雄霸太久了，有挑战者才会让这个世界的科技有更好的发展。我始终看好Ubuntu这个系统，衷心希望它们能够开发出惊世的作品。</p>

<p>魅族的黄章再次出山，我不了解这个人，但从产品的角度来看，我觉得这个人应该很靠谱。在他重新执掌魅族后，应该会做得更好，但愿他能够按照他的想法继续将产品做得更完美，将魅族带向新的辉煌。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[梦醒随谈]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/08/meng-xing-sui-tan/"/>
    <updated>2014-03-08T06:28:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/08/meng-xing-sui-tan</id>
    <content type="html"><![CDATA[<p><img src="http://a.36krcnd.com/photo/2014/f60d3f8aa56c469dc44f5364a4b4aa80.jpg" alt="alt text" /></p>

<p>看着视频，然后在不知不觉中睡着，这是自己又一次在没有脱衣服的情况下躺在床上睡着了。这种情况对于我来说已不是一两次了，具体的次数我已说不清。对于一个邋遢的我来说，这种睡觉方式是无所谓，但从这种入睡的方式来看，我似乎应该检点一下自己，为什么又一次出现这种状况？或许是自己一直处于夜猫的状态，没有合理的睡眠时间，导致自己每次都搞得很疲惫，然后就在浑然中入睡。年轻的时候能够扛住，不知在未来的某一天会引发什么大问题，我不敢想，似乎也不愿意去想。</p>

<p>夜里突然间醒来，听到外面稀疏的雨声，第一反应是明天必须早起去上班，等回过神的时候才知道原来明天是周六，同时又是三八妇女节。这些天有些忙碌，所以自己把日子都过忘了。醒来的第一反应是考虑上班的事情，是否我本身就是一个上班族的命。如果一切真的是天注定，我是否有必要去反抗呢？</p>

<!--more-->


<p>手机的指示灯一直在闪烁着，深怕错过一些事情，就立马拿起查看，幸好只是一些让我厌烦的推广信息，而不是朋友的即时信息。推广信息偶尔发送并不会让我觉得很厌烦，但太频繁就会让我觉得恶心。某种意义上，这些垃圾信息在一些层面上告诉你市场的动态、当前的技术等等一些信息，当然这些需要我们自己细心去发掘，如果从我描述的层面出发去观察的话，它或许不应该被叫做“垃圾”了。</p>

<p>虽然自己不承认，但我毫无疑问已成了一个微信控，打开手机，手轻轻一触摸就点击进去了。看到一个朋友的信息是——他在深夜还在给客户回单，每一个在打拼的孩子都伤不起啊。一直对电商都很感兴趣，却始终没有勇气放下现在的工作，然后投入到这个行业的大军中。都说现在做淘宝不容易，可我并不会做淘宝，一降到电商，就往淘宝上思考的人们，这或许是他们的思维局限吧。对于一个比较崇尚“存异”的人来说，我更希望是有新奇的东西出现。</p>

<p>过去的一年，要感谢“网易云阅读”，是它让我重新回到了阅读（或许不应该用“重”字，可能在此之前我应该没有阅读的习惯吧）。醒了之后自然难以再次入眠，因为睡着的缘故，昨天有关科技方面的咨询还没有查看，当然要去把它补回来。而在众多的订阅号中，“创业邦”和“36Kr”是我每天必翻阅的两个。还是需要感谢36Kr这个新兴的科技媒体平台的，是它让我见识到了很多的好点子及当前科技的动态，没有它，我或许没有这么多的思考。</p>

<p>跨境电商可能是电商领域的最后一块蛋糕，这是CN海淘（iSO/Android）创始人谢文斌说的，我深以为然。虽然现在有很多做电商导购的，但我觉得还是有很大的机会，现在的社会会变得更加族群化（拥有共同爱好的人会聚拢在一起，变得更加紧密）、个性化，只有几家巨型化的公司肯定不能满足当代人的需求，而且这些需要更多的创意来满足人们网上购物的痛点。</p>

<p>前几天，朋友突然发信息告诉我说，据小道消息传闻阿里高薪挖走了张小龙。是真是假，我也无从去考证，我只想说说其它的东西。张小龙微信的成功，我觉得他是依托了一个合适的平台，我觉得这是最重要的。阿里虽然也是一个很NB的平台，即便他真的到了阿里，也未必能够再续之前的那种辉煌。阿里不缺类似张小龙那样的产品经理，但从阿里费劲的推来往可以看出很多东西跟公司本身的定位有莫大的关系。</p>

<p>在BAT三巨头中，我最看好的是腾讯，它掌控了国内大部分人的社交关系。人人、新浪微博、陌陌等等这些社交网络，一直以来都无法撼动它的地位，虽然它们还活着，在这个领域却也还是倒下了。微信的迅速扩展跟QQ这个产品永远都有扯不清的关系。对于腾讯来说，在国内放眼望去，几乎见不到老二的踪迹。而百度，后面的老二360（还有其它的一帮小弟也在瓜分搜索这个市场）一直跟它死嗑着，还有就是跟Google这个巨无霸相差的太远（大部分的IT从业人员，或多或少都会把百度跟这个老大哥对比一番），日子也是过得不舒坦。阿里虽然现在依然风光无限，可它的竞争对手更多，别的不说，就光一个带头大哥就够它应付的了。那些小弟们，在老大和老二的战争中，它们趁机慢慢的崛起，唯品会已到了百亿美金的级别，不得不让人觉得后生可畏。一个庞大的网购帝国，需要借助导购帮助它，却又惧怕它们发展壮大，所以是一边安抚一边打压。电商导购对于阿里来说，是带有一些血缘关系的“自家人”，彼此需要靠在一起取暖，哪一天翻脸就不清楚了，毕竟不是亲生的，一切都是利益为先。所以阿里不仅要面对外面的强敌，更要挪很大的精力在“内部”事务上。</p>

<p>没有明确的主题，没有独创的点子，也没有新奇的想法，随性而写，想到哪就写到哪，遂有此文，与诸君共享。</p>

<p><strong><em>PS:</em></strong>文中的图片跟我整个的表达似乎不着调，但我觉得应该给它打个小广告，走在创业这条路上的小伙伴们都不容易，能帮的只能是这种小忙了。图片来自36Kr的报道“<strong><em><a href="http://www.36kr.com/p/210230.html">海淘是电商的最后一块蛋糕？前阿里员工离职创业“CN海淘”，瞄准小白用户海淘市场</a></em></strong>” 。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[旅行和旅游]]></title>
    <link href="http://txgcwm.github.io/blog/2014/03/06/lu-xing-he-lu-you/"/>
    <updated>2014-03-06T23:25:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/03/06/lu-xing-he-lu-you</id>
    <content type="html"><![CDATA[<p><img src="http://www.enjoyeverywhere.com/data/files/mall/user/244/news/201311121925152076.jpg"></p>

<p>到异地或者到周边走走，我喜欢用旅行这个词，而不愿用旅游来描述。有人说，出游是从一个自己厌倦的地方到一个其他人厌倦的地方，我却不以为然，有这种想法的人多半是由他的心态引发的。生活虽然让人烦躁、困惑，却不能把这种过错归咎于我们生活的地方。</p>

<p>旅游的人，更希望到一个舒适的环境，欣赏美丽的风景，吃美味的食物。稍微有些不顺的事情，就会抱怨，悔恨自己来到这个地方，让自己活受罪。可以说，他们更喜欢自己的行程是一帆风顺。可这些只是理想的状态，世事哪有一切如意的呢？</p>

<!--more-->


<p>旅行的人恰恰相反，无论遇到怎样的状况，他都会心满意足，一切对于他来说都是享受。惧怕缺氧，又怎会见到蔚蓝的天空；忍受不了空旷，又怎会见到广阔的草原；厌恶崎岖的小道，又怎会见到美丽的山景。所有的，只会让我们增长更多的见识。旅行者的意义并不在于沿途中看了多少风景，也不在于是否到达了预期的目的地，而是在于旅行中的那种心境的变化和丰富的经历。不会停留，永远没有终点，无论是结伴还是独行，永远行走在路上。年轻的时候，或许我们不懂这些，但这些积攒我们却能很好的保留下来，等到年老的时候我们或许会真正的体会到它的真实、人生的真谛。</p>

<p>每次出游回来，我都很满足，美景要谈，遇到的不顺的事情我也喜欢谈论，这些都会让我觉得整个过程很美满。一个朋友只是在生活的城市走走，可他却喜欢说自己这是在旅行，这是他在体会生活，每一次都会让自己变得更快活、满足。</p>

<p>没有目的，每次只是想出去走走，看看这个纷繁的世界！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[曾相识]]></title>
    <link href="http://txgcwm.github.io/blog/2014/02/24/ceng-xiang-shi/"/>
    <updated>2014-02-24T23:18:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/02/24/ceng-xiang-shi</id>
    <content type="html"><![CDATA[<p><img src="http://www.cbigame.com/upload/images/20130909/13786959554732.jpg"></p>

<p>见到照片的那瞬间，我就告诉你——我们曾见过，只是没有言语上的交流。对此我深信不疑，我不会在“曾相识”的前面在加上一个“似”。那种感觉，是那么的美妙！你给我的回复是“我们好像在哪见过”，紧接着我反问你“是否记得”，一切是那么的戏剧。在后来的交谈中，我才只知道原来这只是一首歌曲的名字，却也很好的描述了我此时的心境。</p>

<p>那是一个夏天，我刚毕业，工作还没有着落，像大学时期那样，还是沉迷在游戏之中。几个兄弟带着战胜天下所有队伍的使命，排成一行坐在电脑前，并肩作战。这里是我们最好的归宿，只有这片宽广的世界才能给我们带来属于我们的至上荣誉。</p>

<p>激战异常的激烈，各个伸长了脖子，红着眼睛，双手左右挪摆着。那时的我们已经奋战了一夜，却丝毫没有停下的举动。天明了，越来越多的人来到这里，我们却没有丝毫的察觉，那是他们的世界，与我们又有什么相干呢？我们只想生活在自己的世界里，没有忧愁，只有无尽的快乐。</p>

<!--more-->


<p>直到你的出现，我才觉得自己根本不能脱离这个现实的世界。即便我再专心投入到我的战斗中，我还是要被你深深地吸引过去。是什么促使我那样？我根本寻思不出一个合适的理由。</p>

<p>你的动作是那么的不自然，表情是那么的无助和茫然，现在想起来都会“哧哧”发笑。不知道往哪里开启电脑，表情变得越发的焦虑。这是一件很常见的事情，新手都是这样，我并不太在意，只是你的神情和态度比其他的新手显得更焦急和不安，让人有一种怜惜的感觉。最后你还是叫了管理员来帮助你，你站在了一旁，从你期待的眼神中，我看到了一种渴望，那是对未来生活的一种满心期待。</p>

<p>那时的你或许才高中毕业，匆忙赶到网吧，或许只是急切想知道自己高考的成绩，我猜测是那样，但我当时并未去证实这些，哪怕只是假装溜达，从你身后走过，偷偷的瞄上一眼。一瞬间，产生过那样的想法，思前顾后，却没有勇敢的走出那一步。人生又有多少那样的机会，错过了就没有了第二次，只要我伸出援手，从那以后我们可能就变成了朋友，而不必在期遇中等到今天。</p>

<p>总算一切顺利，你成功的打开了电脑，左手弄着嘴唇，右手缓慢的滑动这鼠标，一个清涩的女孩在用她那纯真探索这个丰富的世界。偷偷注视着你，感觉你也没有察觉到，当队友破口大骂的时候，我才回到了那虚幻的世界中。在我不知不觉中，你已悄然离去。没有十分美妙和感人的场景，但那种真实感却触动了我的心灵，从此埋藏在那里。</p>

<p>原本一帆风顺，因为我的元神出窍，导致功亏一溃。很显然，最大的过错是在我，我们配合了那么多年，彼此都了解，只要有一丝的过失，我们都清楚的知道是谁做得不够好。理所当然的，我请他们吃了一次大餐，为此我并不懊恼，因为我找到了自己生活追求的方向。酒足饭包之后，我们约定下次一起血洗今天的耻辱。可从此之后，我并未加入到征战的队伍，因为那并不是我的耻辱，恰恰相反，我因它而获得了重生，人生踏入了一片新的天地，回归到了真实的自我。</p>

<p>多年以后，我们虽不是在冬天相遇，外面却飘着雪花，听着“我们好像在哪见过”的旋律，一起畅谈初次见面的偶遇，内心激动万千。真也好，假也罢，不期而遇总是那么的美妙，愿这份情谊直至地老天荒！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[聊简书谈写作]]></title>
    <link href="http://txgcwm.github.io/blog/2014/02/19/liao-jian-shu-tan-xie-zuo/"/>
    <updated>2014-02-19T22:43:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/02/19/liao-jian-shu-tan-xie-zuo</id>
    <content type="html"><![CDATA[<p><img src="http://ww2.sinaimg.cn/large/a74ecc4cjw1e3zgbfsb2cj213z0m7ahz.jpg"></p>

<p>最近对写作颇感压力，原因是多方面的。首先是同学评价我写作是记流水帐，这么久还是处于这种水平是要让自己汗颜；其次简书上来了很多高品质的写作者，相比之下自己写的东西不值一提；最后是源自自己，内心有好多的想法想要表述，却因惰性让自己止步不前。虽然大山阻隔，但这些困难是可以克服的，一切看似坚不可摧的东西不过是纸老虎罢了。</p>

<p>很多知名的写作者对牛博网（由锤子创办）的评价很高，有心向往，可它现在已经不存在了，只能悔恨自己知道它太晚了。还好，现在有简书这个平台，虽有差别，但我想它们的追求是一致的。以下的历史事件摘自<a href="http://zh.wikipedia.org/zh-cn/%E7%AE%80%E4%B9%A6">维基百科</a>：</p>

<blockquote><p>2012年7月，开始开发简书的前身MALESKINE，一个基于Markdown标记语言的笔记本。<br/>
2012年9月5日， MALESKINE上线内测版本。 <br/>
2012年9月28日，改名为“简书”，并启用新的域名。<br/>
2013年4月22日，上线公测版本，正式放开注册。</p></blockquote>

<p>在简书上写第一篇文章是在2013年的7月份，按照它上线公测的时间来看，我应该属于这个平台的早期用户。在此之前也早早关注了上面的精彩内容，它的风格和内容吸引了我，最后决定在这个平台上安家，在注册的时候毫不犹豫的选择了“写作者”，作为一个互联网的移民，不该只是作为一个消费者，也应该努力成为一个生产者，为网络世界增添一份色彩。</p>

<!--more-->


<p>马上就是它的一周岁生日了，从它的发展来看，它是茁壮成长的。它吸引来了很多优秀的写作者，在现今这种态势下，想要在简书上上头条那真的要好好写作了。别人千姿百态，我们总不能把自己打扮得像一个邋遢的村妇，不求妖艳但也要合体。</p>

<p>随着队伍的壮大，每天都有很多的产出，如何将更多的优秀作品呈现给读者，我想这是简书当下要处理的问题。每个人的口味不同，虽然在首页的文章都很有深度，但如何精准的推给读者是一个难题。就我最近阅读的经历来看，我需要不停地翻阅，去寻找自己喜爱看的文章。每个写作者写出了优秀的文章、发表独特的见解，当然也希望通过它和其他人分享、探讨，如何将写作者的文章呈现给合适的读者，我觉得这也是平台需要努力去做的。</p>

<p>简书的专题中有“程序员”，容易让人知道这是一个有技术人出身创办的网站，他懂得我们的内心。混迹在这上面，看了很多码农写的文章，很有思想，很有见解，谁说程序猿不解人情、没兴趣，他们同样也是文艺范。不过我还是不太赞同广大程序猿在这上面发表专业的技术文章，毕竟这里的受众在这些细节的方面并不专业。近来看到很多的媒体平台也在上面发表文章，总觉得有些怪，这些大众化的文章又有什么新意呢？</p>

<p>这段时间也在探讨“每天练习千字文”，不少网友发表了文章，并且身体力行。我觉得写文章这事不能强迫自己，随心所欲即可，强求的瓜并不会甜，可能坚持到有一天把自己原有的写作热情都给磨灭了。学生时代的作文，那是让人绞尽脑汁，我想每个人都有深刻的体会。写文章我不在乎它是否华丽，我更注重自己所要表达的思想，那才是不一样有品味的作品。</p>

<p>文章写多了，一些杂乱无序的东西就会让自己觉得不舒服，慢慢地，自己也变得注重排版了。写完一篇文章，我也时常去寻找一些和文章表达意思相近的图片，这样看着整个版面更让人赏心悦目。良好的排版不仅让文章变得有条理，也让阅读者读着舒服。以往看到好的文章，就直接转载到自己的空间而不会考虑去将它排版得更好，真正的是“一键操作”，虽然很方便，却又得到了什么呢，它只是在那里悄悄地待着，不属于你的终究是别人的。</p>

<p>作为一个生产者，当然希望自己的东西能够得到他人欣赏、认可。要想赢得他人的敬重，首先是要自己去尊重别人的劳动成果，我也变得更加尊重原著的作者，如果文章引用到别人的东西，我也努力去添加一些参考文章链接。作者一般不求打赏，只求应得的尊重。</p>

<p>写作的道路很漫长、很艰辛、很孤独，但也乐趣无穷。不求回报，只求有价值的东西在世上能够传播，为黯淡的世界留下一些光辉，与万千写作者在这条道路上一同上下求索！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[wav文件格式解析]]></title>
    <link href="http://txgcwm.github.io/blog/2014/02/16/wavwen-jian-ge-shi-jie-xi/"/>
    <updated>2014-02-16T21:54:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/02/16/wavwen-jian-ge-shi-jie-xi</id>
    <content type="html"><![CDATA[<p>WAVE文件是多媒体中使用的声波文件格式之一，以RIFF格式为标准。RIFF是英文Resource Interchange File Format的缩写，每个WAVE文件的头四个字节便是<code>RIFF</code>。WAVE文件是由若干个Chunk组成的，按照在文件中的出现位置包括：RIFF WAVE Chunk, Format Chunk, Fact Chunk(可选), Data Chunk。具体见下图：</p>

<pre><code>------------------------------------------------
|             RIFF WAVE Chunk                  |
|             ID  = 'RIFF'                     |
|             RiffType = 'WAVE'                |
------------------------------------------------
|             Format Chunk                     |
|             ID = 'fmt '                      |
------------------------------------------------
|             Fact Chunk(optional)             |
|             ID = 'fact'                      |
------------------------------------------------
|             Data Chunk                       |
|             ID = 'data'                      |
------------------------------------------------
</code></pre>

<p>其中除了Fact Chunk外，其它三个Chunk是必须的。每个Chunk有各自的ID，位于Chunk最开始位置，作为标示（均为4个字节），并且紧跟在ID后面的是Chunk大小（去除ID和Size所占的字节数后剩下的其它字节数目），4个字节表示，低字节表示数值低位，高字节表示数值高位。</p>

<p>RIFF WAVE Chunk</p>

<pre><code>----------------------------------
|       | 所占字节数 |  具体内容    |
----------------------------------
| ID    |  4 Bytes |   'RIFF'    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| Type  |  4 Bytes |   'WAVE'    |
----------------------------------
</code></pre>

<!--more-->


<p>以<code>FIFF</code>作为标示，然后紧跟着为size字段，该size是整个wav文件大小减去ID和Size所占用的字节数，即FileLen &ndash; 8 = Size。然后是Type字段，为<code>WAVE</code>，表示是wav文件。结构定义如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct RIFF_HEADER
</span><span class='line'>{
</span><span class='line'>    char szRiffID[4];  // 'R','I','F','F'
</span><span class='line'>    DWORD dwRiffSize;
</span><span class='line'>    char szRiffFormat[4]; // 'W','A','V','E'
</span><span class='line'>};</span></code></pre></td></tr></table></div></figure>


<p>Format Chunk</p>

<pre><code>--------------------------------------------------------------------
|               |   字节数   |              具体内容                 |
--------------------------------------------------------------------
| ID            |  4 Bytes  |   'fmt '                             |
--------------------------------------------------------------------
| Size          |  4 Bytes  | 数值为16或18，18则最后有附加信息         |
--------------------------------------------------------------------
| FormatTag     |  2 Bytes  | 编码方式，一般为0x0001                  |
--------------------------------------------------------------------
| Channels      |  2 Bytes  | 声道数目，1--单声道；2--双声道           |
--------------------------------------------------------------------
| SamplesPerSec |  4 Bytes  | 采样频率                               |
--------------------------------------------------------------------
| AvgBytesPerSec|  4 Bytes  | 每秒所需字节数                          |
-------------------------------------------------------------------- 
| BlockAlign    |  2 Bytes  | 数据块对齐单位(每个采样需要的字节数)       |
--------------------------------------------------------------------  
| BitsPerSample |  2 Bytes  | 每个采样需要的bit数                     |
--------------------------------------------------------------------
|               |  2 Bytes  | 附加信息（可选，通过Size来判断有无）       |
-------------------------------------------------------------------- 
</code></pre>

<p>以<code>fmt</code>作为标示。一般情况下Size为16，此时最后附加信息没有；如果为18，则最后多了2个字节的附加信息。主要由一些软件制成的wav格式中含有该2个字节的附加信息。结构定义如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct WAVE_FORMAT
</span><span class='line'>{
</span><span class='line'>    WORD wFormatTag;
</span><span class='line'>    WORD wChannels;
</span><span class='line'>    DWORD dwSamplesPerSec;
</span><span class='line'>    DWORD dwAvgBytesPerSec;
</span><span class='line'>    WORD wBlockAlign;
</span><span class='line'>    WORD wBitsPerSample;
</span><span class='line'>};</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct FMT_BLOCK
</span><span class='line'>{
</span><span class='line'>    char  szFmtID[4]; // 'f','m','t',' '
</span><span class='line'>    DWORD  dwFmtSize;
</span><span class='line'>    WAVE_FORMAT wavFormat;
</span><span class='line'>};</span></code></pre></td></tr></table></div></figure>


<p>Fact Chunk</p>

<pre><code>----------------------------------
|       | 所占字节数 |  具体内容    |
----------------------------------
| ID    |  4 Bytes |   'fact'    |
----------------------------------
| Size  |  4 Bytes |   数值为4    |
----------------------------------
| data  |  4 Bytes |             |
----------------------------------
</code></pre>

<p>Fact Chunk是可选字段，一般当wav文件由某些软件转化而成，则包含该Chunk。结构定义如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct FACT_BLOCK
</span><span class='line'>{
</span><span class='line'>    char  szFactID[4]; // 'f','a','c','t'
</span><span class='line'>    DWORD  dwFactSize;
</span><span class='line'>};</span></code></pre></td></tr></table></div></figure>


<p>Data Chunk</p>

<pre><code>----------------------------------
|       | 所占字节数 |   具体内容   |
----------------------------------
| ID    |  4 Bytes |   'data'    |
----------------------------------
| Size  |  4 Bytes |             |
----------------------------------
| data  |          |             |
----------------------------------
</code></pre>

<p>Data Chunk是真正保存wav数据的地方，以<code>data</code>作为该Chunk的标示。然后是数据的大小。紧接着就是wav数据。根据Format Chunk中的声道数以及采样bit数，wav数据的bit位置可以分成以下几种形式：</p>

<pre><code>---------------------------------------------------------------------
|   单声道   |    取样1    |    取样2    |    取样3    |    取样4       |
|           |--------------------------------------------------------
|  8bit量化 |    声道0    |    声道0    |    声道0    |    声道0        |
---------------------------------------------------------------------
|   双声道  |          取样1            |           取样2              |
|           |--------------------------------------------------------
|  8bit量化 |  声道0(左)  |  声道1(右)  |  声道0(左)  |  声道1(右)       |
---------------------------------------------------------------------
|           |          取样1            |           取样2             |
|   单声道  |---------------------------------------------------------
| 16bit量化 |    声道0    |  声道0      |    声道0    |  声道0          |
|           | (低位字节)  | (高位字节)  | (低位字节)   |  (高位字节)      |
---------------------------------------------------------------------
|           |                         取样1                          |
|   双声道  |---------------------------------------------------------
| 16bit量化 |  声道0(左)  |  声道0(左)  |  声道1(右)  |  声道1(右)       |
|           | (低位字节)  | (高位字节)  | (低位字节)  | (高位字节)        |
---------------------------------------------------------------------
</code></pre>

<p>Data Chunk头结构定义如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>struct DATA_BLOCK
</span><span class='line'>{
</span><span class='line'>    char szDataID[4]; // 'd','a','t','a'
</span><span class='line'>    DWORD dwDataSize;
</span><span class='line'>};</span></code></pre></td></tr></table></div></figure>


<p>wave文件解析及头部格式添加的参考代码请查阅<a href="https://github.com/txgcwm/Linux-C-Examples/tree/master/audio-video/wave">这里</a> 。</p>

<p><big>参考文章</big></p>

<p><a href="http://blog.csdn.net/bluesoal/article/details/932395">wav文件格式分析详解</a><br/>
<a href="http://ikinglai.blog.51cto.com/6220785/1224616">PCM录音数据转Wav格式（c语言版）</a><br/>
<a href="http://blog.sina.com.cn/s/blog_717f471b0100uw98.html">wav文件格式分析详解和解析代码</a><br/>
<a href="http://www.cnblogs.com/cheney23reg/archive/2010/08/08/1795067.html">wave文件(*.wav)格式、PCM数据格式</a><br/>
<a href="http://blog.csdn.net/xiahouzuoxin/article/details/7875406">读取*.wav音频文件</a><br/>
<a href="http://hmilyyang.bokee.com/3757847.html">使用Wav文件来封装G.726格式的原始音频数据</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[红颜劫]]></title>
    <link href="http://txgcwm.github.io/blog/2014/02/08/hong-yan-jie/"/>
    <updated>2014-02-08T23:05:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/02/08/hong-yan-jie</id>
    <content type="html"><![CDATA[<p><img src="http://img.upload.tom.com/data1/upload/888/663/13329931112606233049.jpg"></p>

<p>斩断情丝心犹乱，千头万绪仍纠缠。拱手让江山，低眉恋红颜。祸福轮流转，是劫还是缘。天机算不尽，交织悲与欢。古今痴男女，谁能过情关？</p>

<p align="right">——《后宫甄嬛传》片头曲</p>


<p>红颜劫一曲形象生动地描述了华妃（姓年，大家也应该知道她的出生了）的一生，同时也是年羹尧一生的写照。每每听到此曲，一种伤感在内心油然而生，为她的遭遇惋惜、哀叹。一个只为爱感不择手段的女人，在勾心斗角的深宫中实属难得。</p>

<p>作为皇室的一员，她不可能不清楚一个失宠被打入冷宫的女人是很难再被皇帝宠幸的。下定决心斩断情丝，可内心还是乱成一团麻，交织在一起，错综复杂根本无法理清，越想越乱，想让自己清净下来，却不能阻挡思绪的不断泉涌。</p>

<!--more-->


<p>情愿把江山拱手让给其她人，只想拥有这个男人的爱。或许自己的哥哥可以在一方永久称霸，光耀家族，可这并不是她想要的，她永远站在自己的男人一边，为了这个男人她可以舍弃一切。当雍正皇帝惩治哥哥年羹尧的时候，她也并未悲痛欲绝，只求这个男人不要不爱自己，哪怕丢弃了一分的爱也不舍。虽在寒冷的深宫，看着自己的容颜还是十分怀念当初的美好时光。</p>

<p>祸福轮流转，是劫还是缘？这是她的自问。她又何尝不清楚自己的遭遇呢！当西北战事吃紧的时候，用得着自己的哥哥年羹尧去平定叛乱，自己的地位也逐渐攀升。战祸平息了，年大将军成了“西北王”，统帅一方，功高震主，雍正皇帝在想着办法削弱他的势力，也逐渐冷淡了自己。等到杀死年羹尧的时候，自己的宠幸也就到了尽头。这些并不是真正的爱情，只是权和利的交换。这些是劫数还是缘分，想想这些问题，浑身都会发凉，只是自己太在乎这份爱，没有在人生得意的时候好好想想这些问题。</p>

<p>处在深宫，处处藏着杀机，虽然防备着却还是躲不过。哥哥的事情与自己关系不大，却也成为了对手的把柄，甚至将自己推向了死亡。别人的斗争在有些时候也给自己带来了利益，有时又给自己带来了弊端，悲与欢交织在一起，谁又清楚是好是坏呢？</p>

<p>从古至今，所有痴情的男女，又有哪一个能够闯过情关呢？</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[写在2014之始]]></title>
    <link href="http://txgcwm.github.io/blog/2014/02/07/xie-zai-2014zhi-shi/"/>
    <updated>2014-02-07T21:44:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/02/07/xie-zai-2014zhi-shi</id>
    <content type="html"><![CDATA[<p>过去的13年是极其变动的一年，经历了太多的事情，比以往任何一年都丰富、精彩。谈不上灵魂的洗礼，却也改变了自己的生活方式。人总是往前看的，总不能落后，新的一年应该做更多、更有创意的事情。在这新的一年里，努力做得更好、更上一层楼。</p>

<h1>工作</h1>

<p>去年年底的时候重新更换了一份工作，由起初的不适应变得能够接受，从整体上看还不是我满意的状态。有不足就有机会，在新的一年里尽自己的努力把不足的地方完善起来，或许在此期间会有不错的收获。在逐步了解这个系统的过程中，也在逐步地构建我的更改方案。立足现有的平台，去发现一些更有兴趣的事情，让自己的思维更慎密。</p>

<p>不是说老员工没有发现这些问题，只是他们在长期的工作中逐步缺乏了激情，我想我不应该走他们的道路，我是属于有激情的人。</p>

<!--more-->


<h1>读书、看文章</h1>

<p>买了一堆书还在那里摆放着，不能浪费了劳动得来的钱。虽然工作，也还是有很多时间看书的，很多人总在说没有时间，这只是一个借口，我也不应该把它拿来用。书中得到的东西比网络更细致，能够让人的知识积淀的更深、更厚。</p>

<p>关注了很多的微信公众号和科技网站，它们对于我来说是收获颇多，也让我努力朝这条道路上行走。通过看它们的文字，有一种很大的满足感，很多很好的想法就是从它们那里联想到的，这么好的东西我也不该放弃，让思想更奔放一些。</p>

<h1>旅游、骑行</h1>

<p>读书能够让思想畅飞，旅行却能开阔人的视野，多走走还是很有必要的，每当经过一个地方我都会奔出一些独特的想法。机会的出现，可能就在某一次的出行之中。</p>

<p>在这一年里一定要尝试一次短距离的骑行，是锻炼，也是一种出游。窝在家里不是一件好事，我要借助我的车子去好好看看这个世界，一切的一切只为不安分的心。</p>

<h1>写作</h1>

<p>努力写下更多的文字，记录下瞬间的想法，然后逐步地去完善它们，把它们堆积得更完美。如果有可能，可以尝试去实现一些好的点子。写文字，是为了记录，也是为了分享。文字的水平很差劲，需要好好提高一下，努力在一些网站上上头条。同时，也要把一些在其它地方看到的好的东西记录下来，以备不时之需。</p>

<h1>创客</h1>

<p>杭州又有了一个创客空间，从我目前了解来看，这是一个由技术人发起创建的，它应该更靠谱。杭州之前有一个，可是他们缺乏一种持之以恒的动力，渐渐地就听不到它们的声音了。积极参加到他们举办的活动中去，与一些有共同爱好的人探讨、摸索。</p>

<p>物联网是未来的一个趋势，多去关注这方面的东西。未来的世界，无处不联网，每个人都是网络上的一个节点。这一年是它的一个新的起步，机会应该在处处潜藏。</p>

<h1>Ubuntu</h1>

<p>一直在使用这个系统，很喜欢它。希望自己能够多去学习一些软件，有机会也把它们分享出来。Ubuntu移动操作系统真正上市之后，还是有很多有趣的东西的。</p>

<p>写的东西很杂乱，也没有什么好的头绪，此时的心境也就只能这样了。以上讲的几个方面是未来一年需要努力去做的，但愿新的一年我的生活会更加精彩。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[从百度百家说起]]></title>
    <link href="http://txgcwm.github.io/blog/2014/01/25/cong-bai-du-bai-jia-shuo-qi/"/>
    <updated>2014-01-25T15:11:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/01/25/cong-bai-du-bai-jia-shuo-qi</id>
    <content type="html"><![CDATA[<p><img src="http://www.wsdltop.com/uploads/201312/52bd4174707fb.jpg"></p>

<p>百度百家上线比较低调，我也是从微信公众号了解到这个信息。《百度打通自媒体商业链，孕峰半月入3万》（这家伙最近的文章一直在黑阿里，我都有点看不过去了）一文更是激起了我的兴趣，赶紧跑到官方首页去看了看。相比传统的门户网站，它目前还算精简、清晰。不过进入每篇文章的主页就奇丑无比了，主要是广告让你阅读质量下降了不少，档次瞬间就变低了。免费的东西弄点广告也能理解，百度的广告是要找点合适的去处 ，但也要注重排版，增强用户的体验。现在人们对生活品味越来越注重，如果能够给客户带去舒适感，用户应该是会给服务溢价买单的。</p>

<p>百度将这部分的广告费大部分分给写作者，少数人会觉得这种做法不利于自己的营收，但对于这个大金主来说这又算得上是什么呢！它也只不过是将需要支付给传统媒体人（雇佣他们的成本应该是相当高的）的薪资支付给了那些自媒体人，自己又可借此获取到优质的内容，从而引来更多的流量（我想这些流量也应该属于优质的，这也应该是物以类聚的一种体现吧）。它本身也不怕没有合适的内容，每一个自媒体人都是高产的，他们是社会的精英，提供的内容自然不是寻常东西。而传统的媒体人大部分只是把写作当作是一项工作，或许有些时候只是拷贝其他人的东西修修改改，缺乏货真价实的东西。给自媒体人广告分成，对于百度来说是很划得来的买卖。</p>

<!--more-->


<p>据了解，想在百度百家开栏写作还是比较难的，不是任何人都可以随便到那里写的。这样也好，它确保了上面内容的质量。广告分成那样的事还是不用去考虑了，等练就了一身本事后再去那里施展才华。</p>

<p>自媒体这个概念的火爆应该是由微信公众号引发的。有了公众号后，很多人把阅读移到了微信。在微信能够开号的人一般都有自己熟悉的领域，会分享一些干货，从而聚集了一批忠实的读者。它的出现也改变了很多，大部分的公众号维护者都是自己在不停地码字，虽然没有多少的文采，但他们表述的是自己内心最真实的想法和生活的体验。一些公众号会摘抄他人的文章发表，但它存在不了多长的时间，这些文章我们何处都可以看到，为何要在这里观看呢？相比传统的博客，这里最大的特点就是文章大部分为作者自产的。从小道消息的文章处了解到，微信公众号到目前为止有200多万个，这个数字看起来有点恐怖，但也是说明现在中国的独立思考和写作者还是很多的。</p>

<p>从一个“自”字可以看出，这是单个人的行为，就引发了最主要的问题，那就是一个人的能力总是有限的，不可能每天都有产出。在过去的一年里，我订阅的几个公众号几乎都不能保证每天都有自己的文章（电商比较火的“鬼脚七”帐号也不能），有些会摘抄其它地方的文章，有些会叫来其它朋友写，有些会鼓励订阅者投稿，都在采取各样的方式维持着。摘抄这种方式我是不支持的，请朋友和订阅者投稿这种方式我比较的认同。要想持续运营，还需想出更有效的手段，愿他们能够想到，继续为大众提供优质的内容。</p>

<p>自媒体的内容大多跟自己从事的事情相关，也会发表对世间事物的看法。与传统媒体相比，他们不仅仅在描述一件事情，还在发表自己的独立思考和观点。我们可以看到，在过去的一段时间内很多自媒体人的文章被引用到了一些专业的网站上，这是自媒体人的骄傲，也是时代的进步。</p>

<p>既然不能随意到百家和微信公众号上写文章，那我们去哪里？推荐去简书写写，这里的人也大都都是独立思考者，写出的文章的含金量很高，能够让人涨很多的姿势。如果还是有摘抄文章去那里发表的想法，那么请不要去那里糟蹋那个产品，请为那些独立的思考者留一个洁净的空间。</p>

<p>除了微信公众号和百度百家，网易也在搞，豆瓣也在做（据说它是要收费阅读的，在这个免费的时代它收费是不是必死无疑，这也未必），等等其它家。巨头加入到这场战争中，对于小型的创业公司来说不是好事，对于写作者来说肯定是好事，在哪里不是些，关键是要得到志同道合者的认同，不然在互联网上发表文章没有多大的意义，还不如写在日记本里供自己在老去的时候翻阅。</p>

<p>百度发广告费，阿里送红包，腾讯请你打车，过去的2013真的精彩无比。细心的朋友，其实你应该发现，这个世界在悄悄发生着质的变化，它让我们的生活更加人性化。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[智能家居沙龙纪要]]></title>
    <link href="http://txgcwm.github.io/blog/2014/01/23/zhi-neng-jia-ju-sha-long-ji-yao/"/>
    <updated>2014-01-23T23:17:00+08:00</updated>
    <id>http://txgcwm.github.io/blog/2014/01/23/zhi-neng-jia-ju-sha-long-ji-yao</id>
    <content type="html"><![CDATA[<p><img src="http://www.qianjia.com/upload/2012-05/120511110796351.jpg"></p>

<p>下了班，就骑车匆匆忙忙往浙大科技园跑，原因是这里有一个关于智能家居的沙龙。这个消息也只是在qq群里不经意间看到的，并不完全清楚是否会有，有这样的冲动，完全是因为自己看好这个行业，即便这一趟真的白跑了，我也不会让自己的内心留下遗憾。</p>

<p>到会的人数还是比较多的，小咖啡馆原本摆设的座位根本不能满足需求。到场的人也大多是中年人，年轻的群体只占到了一小部分。在职位角色方面，分享内容的是一些企业的老板，做技术的也有不少，智能家居企业管理层在这里应该占到最多的，当然也有一些市场人员，也有做投资的，各路人马都有。每个人演绎的表情，也在说明着他们所从事的职业。我坐在那里就显得很不入流，有人竟问我是不是学生。难道我的长相真的能够掩盖我的年龄吗？</p>

<!--more-->


<p>为什么会有这么一次沙龙？估计是前不久谷歌以32亿美金收购了Nest（什么？你不知道这家企业是做什么的，那就去好好搜索一下吧），引发了国人血液的沸腾，希望对现有行业有个了解，大家坐到了一起交流交流。</p>

<p>有四位演讲嘉宾，前两位应该做老板比较久了，整个的演讲是在推销他们的产品，宣传他们的公司，但也可以从侧面了解这个行业的发展状况。每个的业务各有侧重，在这个行业做得比较的久了。后面两位老板的企业则是后起之秀（也就刚起步不久），他们分享的是自己的想法，还有就是如何做他们的企业。第三位演讲嘉宾跟我差不多大（也有可能比我小很多），他们的公司就在浙大科技园，很有想法的少年。他们的共同点是都没有借助ppt，很多东西都已彻底融入到了他们的内心了。</p>

<p>有人认为这个市场还没有被完全接受（我也认同），但它到来的脚步越来越来，所以早做准备还是很有必要的。起初是PC互联网，接着是移动互联网，然后应该轮到物联网了。这个概念提了10多年了，为什么现在才来到，那是因为物联网的发展要基于前两者的。</p>

<p>其中一家公司已经拿到了顶级资本的战略投资，这时有人问VC看重他们的是什么，绝对不可能是卖硬件。是，这个时代靠硬件已经不能创造什么大的受益了，服务已经摆到了第一位。现在重要的是在于数据的分析，然后服务好我们的客户，让他们的生活更方便、自由。智能路由器当下还是比较火的，说好听的是抢占入口，说的不好听的就是收集客户的一些日常活动信息。这一切侵犯了隐私了吗？用演讲嘉宾的话回答就是：自从你用了智能手机就没有什么隐私了。</p>

<p>在无线通信手段上，不太看好zigbee，倾向于蓝牙和wifi，到场的很多企业的智能产品是通过wifi构建一个网络。我想wifi的使用已经深入人心了（一些很多不是很专业的朋友，在遇到网络问题的时候，可能会不经意的说“可能频段有干扰”），无需花这种精力去培养和教育这个市场。</p>

<p>物联网的到来，不是一场革命，它只是一种改进，是对现有生活设施不满的一种抗议。这个时代会很快来临，或许就在移动互联网洗牌的时候（此时此刻它已经在进行着了），它悄悄在崛起。有人说2014是智能汽车或者是智能TV的元年，但我想说这是物联网的大时代！</p>
]]></content>
  </entry>
  
</feed>
